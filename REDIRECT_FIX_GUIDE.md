# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ –ø–æ–∏—Å–∫–æ–≤–∏–∫

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—Ä–∞–∑–µ (`warning-phrase.html`) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –ø–æ–∫–∞–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–µ–≥–æ –∞–ª–µ—Ä—Ç–∞, –Ω–æ –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø–æ–∏—Å–∫–æ–≤–∏–∫ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è.

### üìä **–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã:**
- ‚úÖ –ê–ª–µ—Ä—Ç –ø–æ—è–≤–ª—è–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ–∏—Å–∫–æ–≤—ã–π —Å–∞–π—Ç –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–∞–ª—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω

### üß™ **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ URL:**
```javascript
// –ò—Å—Ö–æ–¥–Ω—ã–π URL –ø–∞—Ä–∞–º–µ—Ç—Ä:
search=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%25D1%2582%25D0%25B5%25D1%2581...

// –ü–æ—Å–ª–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:
https://www.google.com/search?q=%D1%82%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D0%B0%D1%8F%20...
```

### üö´ **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ—Ö–æ–¥–∞:**
   ```javascript
   // ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:
   window.location.href = this.originalSearch;
   ```
   - –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Chrome —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
   - –ú–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

2. **–î–≤–æ–π–Ω–æ–µ URL –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - URL –±—ã–ª –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –¥–≤–∞–∂–¥—ã
   - –¢—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –¥–≤–∞ —ç—Ç–∞–ø–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback –º–µ—Ç–æ–¥–æ–≤:**
   - –ù–µ –±—ã–ª–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ

---

## ‚ö° –†–µ—à–µ–Ω–∏–µ

### üîß **1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Chrome Tabs API**

```javascript
// ‚úÖ –ù–æ–≤—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥:
if (typeof chrome !== 'undefined' && chrome.tabs) {
    chrome.tabs.query({active: true, currentWindow: true}, (tabs) => {
        if (tabs[0]) {
            chrome.tabs.update(tabs[0].id, {url: targetUrl}, (tab) => {
                if (chrome.runtime.lastError) {
                    // Fallback –µ—Å–ª–∏ Chrome API –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
                    this.fallbackRedirect(targetUrl);
                } else {
                    this.debugLog('‚úÖ Successfully redirected via chrome.tabs');
                }
            });
        }
    });
}
```

### üìù **2. –£–ª—É—á—à–µ–Ω–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ URL**

```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–≤–æ–π–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
let decodedUrl = decodeURIComponent(this.originalSearch);

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑
if (decodedUrl.includes('%')) {
    try {
        decodedUrl = decodeURIComponent(decodedUrl);
        this.debugLog('üìù Applied double URL decoding');
    } catch (e) {
        this.debugLog('üìù Single URL decoding was sufficient');
    }
}
```

### üîÑ **3. –ö–∞—Å–∫–∞–¥ fallback –º–µ—Ç–æ–¥–æ–≤**

```javascript
fallbackRedirect(url) {
    try {
        // –ü–æ–ø—ã—Ç–∫–∞ 1: window.top
        if (window.top) {
            window.top.location.href = url;
        } 
        // –ü–æ–ø—ã—Ç–∫–∞ 2: window.parent
        else if (window.parent) {
            window.parent.location.href = url;
        } 
        // –ü–æ–ø—ã—Ç–∫–∞ 3: window.location
        else {
            window.location.href = url;
        }
    } catch (error) {
        // –ü–æ–ø—ã—Ç–∫–∞ 4: –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞
        try {
            window.open(url, '_blank');
        } catch (e) {
            // –ü–æ–ø—ã—Ç–∫–∞ 5: —Ä—É—á–Ω–æ–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
            alert(`–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –≤—Ä—É—á–Ω—É—é:\n${url}`);
        }
    }
}
```

---

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### üìÅ **–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**

#### `warning-phrase.js`:
1. ‚úÖ **–ú–µ—Ç–æ–¥ `continueSearch()`** - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞
2. ‚úÖ **–ú–µ—Ç–æ–¥ `parseUrlParams()`** - —É–ª—É—á—à–µ–Ω–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ URL
3. ‚úÖ **–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `fallbackRedirect()`** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–µ—Ä–µ—Ö–æ–¥–∞

#### `manifest.json`:
- ‚úÖ –£–∂–µ —Å–æ–¥–µ—Ä–∂–∞–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: `"tabs"`, `"activeTab"`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ **–¢–µ—Å—Ç-–∫–µ–π—Å—ã:**

1. **–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
   ```
   1. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ warning-phrase.html —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   2. –ù–∞–∂–∞—Ç–∏–µ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫"
   3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ –∞–ª–µ—Ä—Ç–µ
   4. ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Google —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```javascript
   // –ò—Å—Ö–æ–¥–Ω—ã–π: phrase=%D1%80%D0%B0%D0%B7%D0%B0
   // –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π: "—Ä–∞–∑–∞"
   // ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
   ```

3. **Fallback —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
   ```
   - Chrome Tabs API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ ‚Üí window.top.location
   - window.top –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ ‚Üí window.parent.location  
   - window.parent –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ ‚Üí window.location
   - –í—Å–µ –Ω–µ—É–¥–∞—á–Ω—ã ‚Üí window.open –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
   - –ò —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí —Ä—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ URL
   ```

### üîç **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**

–í –∫–æ–Ω—Å–æ–ª–∏ —Ç–µ–ø–µ—Ä—å –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥:
```
[SafeLink Phrases] üîó Original search URL: https%3A%2F%2F...
[SafeLink Phrases] üîó Decoded URL: https://www.google.com/search?q=...
[SafeLink Phrases] üåê Using chrome.tabs.update API
[SafeLink Phrases] ‚úÖ Successfully redirected via chrome.tabs
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –ê–ª–µ—Ä—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- ‚ùå URL –Ω–µ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### ‚úÖ **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –ê–ª–µ—Ä—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–æ–∏—Å–∫–æ–≤–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ URL –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ï—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ fallback –º–µ—Ç–æ–¥—ã
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

### üîÑ **–®–∞–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:**
   ```bash
   chrome://extensions/ ‚Üí SafeLink ‚Üí ‚ü≥ –û–±–Ω–æ–≤–∏—Ç—å
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é:**
   ```bash
   1. –û—Ç–∫—Ä–æ–π—Ç–µ test-phrases.html
   2. –í–≤–µ–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Ñ—Ä–∞–∑—É (–Ω–∞–ø—Ä–∏–º–µ—Ä "—Ç–µ—Å—Ç–æ")
   3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É Google
   4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—Ä–∞–∑—É"
   5. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫"
   6. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤ –∞–ª–µ—Ä—Ç–µ
   7. ‚úÖ –î–æ–ª–∂–µ–Ω –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Google —Å –ø–æ–∏—Å–∫–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:**
   ```bash
   F12 ‚Üí Console ‚Üí –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è [SafeLink Phrases]
   ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ —É—Å–ø–µ—à–Ω–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ
   ```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–µ—Ä–µ—Ö–æ–¥–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Chrome Tabs API
- URL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- Fallback –º–µ—Ç–æ–¥—ã –Ω–µ –Ω–∞—Ä—É—à–∞—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üîí **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞—Ç–∞–∫:**
- URL –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—à–∏–±–æ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è URL –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ –ø–æ–∏—Å–∫–æ–≤–∏–∫ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞**:

- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥** —á–µ—Ä–µ–∑ Chrome Tabs API
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–≤–æ–π–Ω–æ-–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL
- ‚úÖ **–ù–∞–¥–µ–∂–Ω—ã–µ fallback –º–µ—Ç–æ–¥—ã** –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ URL

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: 23 –∏—é–ª—è 2024*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û*  
*–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ‚úÖ –ü–†–û–ô–î–ï–ù–û* 