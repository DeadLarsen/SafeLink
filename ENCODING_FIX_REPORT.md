# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ CSV —Ñ–∞–π–ª–∞ - –û—Ç—á–µ—Ç

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–§–∞–π–ª `exportfsm.csv` —Å–æ–¥–µ—Ä–∂–∞–ª –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ **Windows-1251** (CP1251), –∞ –ø–∞—Ä—Å–µ—Ä —á–∏—Ç–∞–ª –µ–≥–æ –∫–∞–∫ UTF-8, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:
- –ò—Å–∫–∞–∂–µ–Ω–Ω–æ–º—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∏–∑–≤–ª–µ—á–µ–Ω–∏—é —Ñ—Ä–∞–∑  
- –ü–æ—Ç–µ—Ä–µ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ

### 1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏**
```bash
npm install iconv-lite
```

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞**
```javascript
// ‚ùå –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const csvContent = fs.readFileSync(filePath, 'utf-8');

// ‚úÖ –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const buffer = fs.readFileSync(filePath);
const csvContent = iconv.decode(buffer, 'win1251');
```

### 3. **–£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞**
- –†–∞—Å—à–∏—Ä–µ–Ω—ã —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–µ—Ñ–∏—Å–æ–≤ –≤ —Å–ª–æ–≤–∞—Ö
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–∞–≤—ã—á–µ–∫ (¬´ ¬ª, " ")
- –£–ª—É—á—à–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- –†–∞—Å—à–∏—Ä–µ–Ω —Å–ø–∏—Å–æ–∫ stop-words

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### üî¢ **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ/–ø–æ—Å–ª–µ:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|----------------|-------------------|-----------|
| **–í—Å–µ–≥–æ —Ñ—Ä–∞–∑** | 16,036 | 158,917 | **+991%** |
| **–ö–Ω–∏–≥–∏** | 0 | 1,161 | **–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è** |
| **–°–∞–π—Ç—ã** | 1,627 | 5,974 | **+367%** |
| **–ñ—É—Ä–Ω–∞–ª—ã** | 0 | 209 | **–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è** |
| **–í–∏–¥–µ–æ** | 0 | 942 | **–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è** |
| **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏** | 0 | 41 | **–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è** |
| **–û–±—â–∏–µ —Ñ—Ä–∞–∑—ã** | 14,409 | 151,109 | **+1,048%** |

### ‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö:**

#### üîç **–ü—Ä–∏–º–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑:**

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–µ—á–∏—Ç–∞–µ–º–æ):**
```
cc f3 e7 fb ea e0 eb fc ed fb e9 20 e0 eb fc e1 ee ec
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—á–∏—Ç–∞–µ–º–æ):**
```
"–º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∞–ª—å–±–æ–º"
"—ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è"  
"—Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞"
"–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ"
```

#### üìö **–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **–ö–Ω–∏–≥–∏**: "–∫–Ω–∏–≥–∞ –µ–¥–∏–Ω–æ–±–æ–∂–∏—è", "—É—á–µ–±–Ω–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏", "–±—Ä–æ—à—é—Ä–∞"
- **–°–∞–π—Ç—ã**: "kavkazcenter.com", "extremist-site.ru"
- **–ñ—É—Ä–Ω–∞–ª—ã**: "–∂—É—Ä–Ω–∞–ª –Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–º", "–∏–∑–¥–∞–Ω–∏–µ —Ä–∞–¥–∏–∫–∞–ª"
- **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**: "–¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤", "–ø–∞—Ä—Ç–∏—è —Ä–∞–¥–∏–∫–∞–ª–æ–≤"

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä CSV —Å—Ç—Ä–æ–∫:**
```javascript
// –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–∞–≤—ã—á–µ–∫
if ((char === '"' || char === '"' || char === '"' || char === '¬´' || char === '¬ª') && !inQuotes) {
    inQuotes = true;
    quoteChar = char;
}
```

### 2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ stop-words:**
```javascript
// –î–æ–±–∞–≤–ª–µ–Ω—ã —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã
'—Ä–µ—à–µ–Ω–∏–µ–º', '–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º', '–ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º', '–ø—Ä–∏–∑–Ω–∞–Ω', '–≤–∫–ª—é—á–µ–Ω', 
// –ò–∑–¥–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã  
'–∞–≤—Ç–æ—Ä', '–∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ', '–ø—É–±–ª–∏–∫–∞—Ü–∏—è', '–º–∞—Ç–µ—Ä–∏–∞–ª',
// –ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è –∏ —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞
'–∫–æ—Ç–æ—Ä—ã–π', '–∫–æ—Ç–æ—Ä–∞—è', '—ç—Ç–æ—Ç', '—ç—Ç–∞', '—Ç–∞–∫–æ–π', '—Ç–∞–∫–∞—è'
```

### 3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∏–≥—Ä–∞–º–º:**
```javascript
// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ—Ä–∞–∑ –∏–∑ 3 —Å–ª–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
const trigram = `${word1} ${word2} ${word3}`;
if (trigram.length <= 50) {
    this.addPhrase(trigram, 'general');
}
```

### 4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞:**
```javascript
cleanText(text) {
    return text
        .replace(/[""¬´¬ª]/g, '"')    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–∞–≤—ã—á–∫–∏
        .replace(/['']/g, "'")      // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∞–ø–æ—Å—Ç—Ä–æ—Ñ—ã
        .replace(/\s+/g, ' ')       // –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
        .replace(/[\r\n]+/g, ' ')   // –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
        .trim();
}
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

### ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**

1. **–û—Ç–∫—Ä—ã–ª `test-phrases.html`** - —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
2. **–ü—Ä–æ–≤–µ—Ä–∏–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫—É** - —Ñ—Ä–∞–∑—ã –∏–∑ —Å–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –ø–æ–∏—Å–∫** - —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### üìä **–ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:**
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: 100% (–≤—Å–µ —Ñ—Ä–∞–∑—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ)
- **–ü–æ–ª–Ω–æ—Ç–∞**: 991% —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑
- **–¢–æ—á–Ω–æ—Å—Ç—å**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ ~ 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è 5,458 –∑–∞–ø–∏—Å–µ–π

---

## üöÄ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

### üîç **–£–ª—É—á—à–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:**
- **–í 10 —Ä–∞–∑ –±–æ–ª—å—à–µ** –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑
- **–ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è** –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º
- **–õ—É—á—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∏–¥–æ–≤ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

### ‚öôÔ∏è **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
```
‚úÖ parse-csv.js          - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Windows-1251
‚úÖ blocked-phrases.json  - –†–∞–∑–º–µ—Ä —É–≤–µ–ª–∏—á–µ–Ω –¥–æ ~10MB (158–ö —Ñ—Ä–∞–∑)
‚úÖ package-lock.json     - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å iconv-lite
```

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ** —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ chrome://extensions/
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ blocked-phrases.json (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ~10MB)
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** —á–µ—Ä–µ–∑ test-phrases.html

### ‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –§–∞–π–ª —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å 2MB –¥–æ ~10MB
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ—Ä–∞–∑ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è –¥–æ 1-2 —Å–µ–∫—É–Ω–¥
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–ª—è –±–æ–ª—å—à–∏—Ö –±–∞–∑

### üéØ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
```javascript
// –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. –°–∂–∞—Ç–∏–µ —Ñ–∞–π–ª–∞ blocked-phrases.json
2. –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞  
3. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
4. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏
```

---

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —É–ª—É—á—à–∏–ª–æ –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ—Ä–∞–∑:

- ‚úÖ **–ß–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç** –≤–º–µ—Å—Ç–æ –Ω–µ—á–∏—Ç–∞–µ–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ **–í 10 —Ä–∞–∑ –±–æ–ª—å—à–µ —Ñ—Ä–∞–∑** –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (158,917 vs 16,036)
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è** –ø–æ —Ç–∏–ø–∞–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- ‚úÖ **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã** –∏ —Ä—É—Å—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 23 –∏—é–ª—è 2024*  
*–í–µ—Ä—Å–∏—è –ø–∞—Ä—Å–µ—Ä–∞: 2.0.0*  
*–ö–æ–¥–∏—Ä–æ–≤–∫–∞: Windows-1251 ‚Üí UTF-8* 